!function(t,i){"use strict";var e,a=i.event;a.special.smartresize={setup:function(){i(this).bind("resize",a.special.smartresize.handler)},teardown:function(){i(this).unbind("resize",a.special.smartresize.handler)},handler:function(t,i){var n=this,r=arguments;t.type="smartresize",e&&clearTimeout(e),e=setTimeout(function(){a.dispatch.apply(n,r)},"execAsap"===i?0:100)}},i.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},i.Mason=function(t,e){this.element=i(e),this._create(t),this._init()},i.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},i.Mason.prototype={_filterFindBricks:function(t){var i=this.options.itemSelector;return i?t.filter(i).add(t.find(i)):t},_getBricks:function(t){var i=this._filterFindBricks(t).css({position:"absolute"}).addClass("masonry-brick");return i},_create:function(e){this.options=i.extend(!0,{},i.Mason.settings,e),this.styleQueue=[];var a=this.element[0].style;this.originalStyle={height:a.height||""};var n=this.options.containerStyle;for(var r in n)this.originalStyle[r]=a[r]||"";this.element.css(n),this.horizontalDirection=this.options.isRTL?"right":"left";var s=this.element.css("padding-"+this.horizontalDirection),o=this.element.css("padding-top");this.offset={x:s?parseInt(s,10):0,y:o?parseInt(o,10):0},this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var l=this;setTimeout(function(){l.element.addClass("masonry")},0),this.options.isResizable&&i(t).bind("smartresize.masonry",function(){l.resize()}),this.reloadItems()},_init:function(t){this._getColumns(),this._reLayout(t)},option:function(t){i.isPlainObject(t)&&(this.options=i.extend(!0,this.options,t))},layout:function(t,i){for(var e=0,a=t.length;a>e;e++)this._placeBrick(t[e]);var n={};if(n.height=Math.max.apply(Math,this.colYs),this.options.isFitWidth){var r=0;for(e=this.cols;--e&&0===this.colYs[e];)r++;n.width=(this.cols-r)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:n});var s,o=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",l=this.options.animationOptions;for(e=0,a=this.styleQueue.length;a>e;e++)s=this.styleQueue[e],s.$el[o](s.style,l);this.styleQueue=[],i&&i.call(t),this.isLaidOut=!0},_getColumns:function(){var t=this.options.isFitWidth?this.element.parent():this.element,i=t.width();this.columnWidth=this.isFluid?this.options.columnWidth(i):this.options.columnWidth||this.$bricks.outerWidth(!0)||i,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((i+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(t){var e,a,n,r,s,o=i(t);if(e=Math.ceil(o.outerWidth(!0)/this.columnWidth),e=Math.min(e,this.cols),1===e)n=this.colYs;else for(a=this.cols+1-e,n=[],s=0;a>s;s++)r=this.colYs.slice(s,s+e),n[s]=Math.max.apply(Math,r);for(var l=Math.min.apply(Math,n),c=0,h=0,d=n.length;d>h;h++)if(n[h]===l){c=h;break}var u={top:l+this.offset.y};u[this.horizontalDirection]=this.columnWidth*c+this.offset.x,this.styleQueue.push({$el:o,style:u});var _=l+o.outerHeight(!0),g=this.cols+1-d;for(h=0;g>h;h++)this.colYs[c+h]=_},resize:function(){var t=this.cols;this._getColumns(),(this.isFluid||this.cols!==t)&&this._reLayout()},_reLayout:function(t){var i=this.cols;for(this.colYs=[];i--;)this.colYs.push(0);this.layout(this.$bricks,t)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(t){this.reloadItems(),this._init(t)},appended:function(t,i,e){if(i){this._filterFindBricks(t).css({top:this.element.height()});var a=this;setTimeout(function(){a._appended(t,e)},1)}else this._appended(t,e)},_appended:function(t,i){var e=this._getBricks(t);this.$bricks=this.$bricks.add(e),this.layout(e,i)},remove:function(t){this.$bricks=this.$bricks.not(t),t.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var e=this.element[0].style;for(var a in this.originalStyle)e[a]=this.originalStyle[a];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),i(t).unbind(".masonry")}},i.fn.imagesLoaded=function(t){function e(){t.call(n,r)}function a(t){var n=t.target;n.src!==o&&-1===i.inArray(n,l)&&(l.push(n),--s<=0&&(setTimeout(e),r.unbind(".imagesLoaded",a)))}var n=this,r=n.find("img").add(n.filter("img")),s=r.length,o="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",l=[];return s||e(),r.bind("load.imagesLoaded error.imagesLoaded",a).each(function(){var t=this.src;this.src=o,this.src=t}),n};var n=function(i){t.console&&t.console.error(i)};i.fn.masonry=function(t){if("string"==typeof t){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var a=i.data(this,"masonry");return a?i.isFunction(a[t])&&"_"!==t.charAt(0)?(a[t].apply(a,e),void 0):(n("no such method '"+t+"' for masonry instance"),void 0):(n("cannot call methods on masonry prior to initialization; attempted to call method '"+t+"'"),void 0)})}else this.each(function(){var e=i.data(this,"masonry");e?(e.option(t||{}),e._init()):i.data(this,"masonry",new i.Mason(t,this))});return this}}(window,jQuery),function(){var t=this,i=function(t){if(!t||!t.canvas||!t.path)throw"ImgZoom constructor: missing arguments canvas or path";this.canvas=t.canvas,this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.context=this.canvas.getContext("2d"),this.desktop=t.desktop||!0,this.position={x:0,y:0},this.scale={x:.5,y:.5},this.imgTexture=new Image,this.imgTexture.src=t.path,this.lastZoomScale=5,this.lastX=null,this.lastY=null,this.mdown=!0,this.init=!1,this.checkRequestAnimationFrame(),requestAnimationFrame(this.animate.bind(this)),this.setEventListeners()};i.prototype={animate:function(){if(!this.init&&this.imgTexture.width){var t=null;t=this.canvas.clientWidth>this.canvas.clientHeight?this.canvas.clientWidth/this.imgTexture.width:this.canvas.clientHeight/this.imgTexture.height,this.scale.x=t,this.scale.y=t,this.init=!0}this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.imgTexture,this.position.x,this.position.y,this.scale.x*this.imgTexture.width,this.scale.y*this.imgTexture.height),requestAnimationFrame(this.animate.bind(this))},gesturePinchZoom:function(t){var i=!1;if(t.targetTouches.length>=2){var e=t.targetTouches[0],a=t.targetTouches[1],n=Math.sqrt(Math.pow(a.pageX-e.pageX,2)+Math.pow(a.pageY-e.pageY,2));this.lastZoomScale&&(i=n-this.lastZoomScale),this.lastZoomScale=n}return i},doZoom:function(t){if(t){var i=this.scale.x,e=this.scale.x+t/100,a=e-i,n=this.imgTexture.width*this.scale.x,r=this.imgTexture.height*this.scale.y,s=this.imgTexture.width*a,o=this.imgTexture.height*a,l=this.canvas.clientWidth/2,c=this.canvas.clientHeight/2,h=-this.position.x+l,d=-this.position.y+c,u=-h/n,_=-d/r,g=this.position.x+s*u,f=this.position.y+o*_,m=n+s,p=r+o;m<this.canvas.clientWidth||(g>0&&(g=0),g+m<this.canvas.clientWidth&&(g=this.canvas.clientWidth-m),p<this.canvas.clientHeight||(f>0&&(f=0),f+p<this.canvas.clientHeight&&(f=this.canvas.clientHeight-p),this.scale.x=e,this.scale.y=e,this.position.x=g,this.position.y=f))}},doMove:function(t,i){if(this.lastX&&this.lastY){var e=t-this.lastX,a=i-this.lastY,n=this.imgTexture.width*this.scale.x,r=this.imgTexture.height*this.scale.y;this.position.x+=e,this.position.y+=a,this.position.x>0?this.position.x=0:this.position.x+n<this.canvas.clientWidth&&(this.position.x=this.canvas.clientWidth-n),this.position.y>0?this.position.y=0:this.position.y+r<this.canvas.clientHeight&&(this.position.y=this.canvas.clientHeight-r)}this.lastX=t,this.lastY=i},setEventListeners:function(){this.canvas.addEventListener("touchstart",function(){this.lastX=null,this.lastY=null,this.lastZoomScale=null}.bind(this)),this.canvas.addEventListener("touchmove",function(t){if(t.preventDefault(),2==t.targetTouches.length)this.doZoom(this.gesturePinchZoom(t));else if(1==t.targetTouches.length){var i=t.targetTouches[0].pageX-this.canvas.getBoundingClientRect().left,e=t.targetTouches[0].pageY-this.canvas.getBoundingClientRect().top;this.doMove(i,e)}}.bind(this)),this.desktop&&(window.addEventListener("keyup",function(t){console.log(t.keyCode),192==t.keyCode&&this.doZoom(5),187==t.keyCode&&this.doZoom(-5)}.bind(this)),window.addEventListener("mousedown",function(){this.mdown=!0,this.lastX=null,this.lastY=null}.bind(this)),window.addEventListener("mouseup",function(){this.mdown=!1}.bind(this)),window.addEventListener("mousemove",function(t){var i=t.pageX-this.canvas.getBoundingClientRect().left,e=t.pageY-this.canvas.getBoundingClientRect().top;t.target==this.canvas&&this.mdown&&this.doMove(i,e),(0>=i||i>=this.canvas.clientWidth||0>=e||e>=this.canvas.clientHeight)&&(this.mdown=!1)}.bind(this)),window.addEventListener("mousewheel",function(t){var i=t.wheelDeltaY;this.lastZoomScale&&(zoom=i-this.lastZoomScale),this.doZoom(zoom)}.bind(this)))},checkRequestAnimationFrame:function(){for(var t=0,i=["ms","moz","webkit","o"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i){var e=(new Date).getTime(),a=Math.max(0,16-(e-t)),n=window.setTimeout(function(){i(e+a)},a);return t=e+a,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}},t.ImgTouchCanvas=i}.call(this),function(t){var i,e,a,n,r,s,o,l,c={getSliderValuesAtPositionPx:function(t,i){var e,a,n=this,r=n.data("pixel_to_value_mapping");if("undefined"!=typeof r)e=r(t),a=r(i);else{var s=c.getSliderWidthPx.call(n)-n.data("left_grip_width");e=c.inverse_rangemap_0_to_n.call(n,t,s),a=c.inverse_rangemap_0_to_n.call(n,i,s)}return[e,a]},validateAndMoveGripsToPx:function(t,i){var e=this,a=c.getSliderWidthPx.call(e)-e.data("left_grip_width");if(a>=i&&t>=0&&a>=t&&(!e.data("has_right_grip")||i>=t)){var n=e.data("cur_min"),r=e.data("cur_max");c.set_position_from_px.call(e,t,i),c.refresh_grips_style.call(e),c.notify_changed_implicit.call(e,"drag_move",n,r)}return e},updateAriaAttributes:function(){var t=this,i=t.data("settings"),e=t.find(i.left_grip_selector);if(t.data("has_right_grip")){var a=t.find(i.right_grip_selector);e.attr("aria-valuemin",t.data("range_min")).attr("aria-valuenow",h.get_current_min_value.call(t)).attr("aria-valuemax",h.get_current_max_value.call(t)),a.attr("aria-valuemin",h.get_current_min_value.call(t)).attr("aria-valuenow",h.get_current_max_value.call(t)).attr("aria-valuemax",t.data("range_max"))}else e.attr("aria-valuemin",t.data("range_min")).attr("aria-valuenow",h.get_current_min_value.call(t)).attr("aria-valuemax",t.data("range_max"));return t},getSliderWidthPx:function(){var t=this;return Math.round(t.width())},getGripPositionPx:function(t){return parseInt(t.css("left").replace("px",""),10)},getLeftGripPositionPx:function(){var t=this,i=t.data("settings"),e=t.find(i.left_grip_selector);return c.getGripPositionPx.call(t,e)},getRightGripPositionPx:function(){var t=this,i=t.data("settings");if(t.data("has_right_grip"))return c.getGripPositionPx.call(t,t.find(i.right_grip_selector));var e=c.getSliderWidthPx.call(t)-t.data("left_grip_width");return c.rangemap_0_to_n.call(t,t.data("cur_max"),e)},getLeftGripWidth:function(){var t=this,i=t.data("settings"),e=t.find(i.left_grip_selector);return Math.round(e.width())},getRightGripWidth:function(){var t=this,i=t.data("settings"),e=t.find(i.right_grip_selector);return Math.round(e.width())},binarySearch:function(t,i,e,a){for(var n,r,s=0,o=t.length-1;o>=s;){n=(s+o)/2|0,r=e(t,n);var l=a(i,t,n);if(l>0)s=n+1;else{if(!(0>l))return n;o=n-1}}return-1},haveLimits:function(){var t=this,i=t.data("lower-limit"),e=t.data("upper-limit"),a=!1;return"undefined"!=typeof i&&"undefined"!=typeof e&&(a=!0),a},refresh_grips_style:function(){var t=this,i=t.data("settings");if("undefined"!=typeof i.highlight){var e=t.data("highlightedRangeMin");if("undefined"!=typeof e){var a=t.find(i.left_grip_selector),n=t.find(i.right_grip_selector),r=t.data("highlightedRangeMax"),s=t.data("cur_min"),o=t.data("cur_max"),l=i.highlight.grip_class;e>s||s>r?a.removeClass(l):a.addClass(l),e>o||o>r?n.removeClass(l):n.addClass(l)}}},valueToPx:function(t){var i=this,e=i.data("value_to_pixel_mapping");if("undefined"!=typeof e)return e(t);var a=c.getSliderWidthPx.call(i)-i.data("left_grip_width");return c.rangemap_0_to_n.call(i,t,a)},set_position_from_val:function(t,i){var e=this,a=e.data("range_min"),n=e.data("range_max");a>t&&(t=a),t>n&&(t=n),e.data("has_right_grip")?(i>n&&(i=n),a>i&&(i=a)):i=e.data("cur_max");var r=c.valueToPx.call(e,t),s=c.valueToPx.call(e,i);return c.set_handles_at_px.call(e,r,s),e.data("cur_min",t),e.data("has_right_grip")&&e.data("cur_max",i),e},set_position_from_px:function(t,i){var e=this;c.set_handles_at_px.call(e,t,i);var a=c.getSliderValuesAtPositionPx.call(e,t,i),n=a[0],r=a[1];return e.data("cur_min",n),e.data("has_right_grip")&&e.data("cur_max",r),e},set_handles_at_px:function(t,i){var e=this,a=e.data("settings"),n=a.left_grip_selector,r=a.right_grip_selector,s=a.value_bar_selector,o=e.data("left_grip_width"),l=o/2;return e.data("has_right_grip")?(e.find(s).css("left",t+l+"px").css("width",i-t+l+"px"),e.find(n).css("left",t+"px")):(i>t?e.find(s).css("left",t+l+"px").css("width",i-t+l+"px"):e.find(s).css("left",i+l+"px").css("width",t-i+l+"px"),e.find(n).css("left",t+"px")),e.find(r).css("left",i+"px"),e},drag_start_func_touch:function(t,i,e,n,r){var s=this,o=t.originalEvent,l=o.touches[0],h=l.pageY,d=l.pageX,u=Math.abs(s.offset().top-h),_=s.offset().left,g=_-d,f=d-(_+s.width());u>i.touch_tolerance_value_bar_y||g>i.touch_tolerance_value_bar_x||f>i.touch_tolerance_value_bar_x||(o.preventDefault(),a=l.pageX,c.drag_start_func.call(s,l,i,e,n,r))},drag_start_func:function(a,r,s,o,l){var d=this;if(d.find(r.left_grip_selector+","+r.value_bar_selector+","+r.right_grip_selector).removeClass(r.animating_css_class),h.is_enabled.call(d)){var u=t(a.target),_=!1;if("object"==typeof r.highlight&&(_=u.is(r.highlight.panel_selector)),l!==!1||u.is(r.left_grip_selector)||u.is(r.right_grip_selector)||u.is(r.value_bar_selector)||_||u.is(d)){i=d;var g,f,m,p,v,x,y=c.getGripPositionPx.call(d,s),b=c.getSliderWidthPx.call(d)-d.data("left_grip_width"),w=s.offset().left,P=c.getRightGripPositionPx.call(d);f=a.pageX-d.data("left_grip_width")/2,m=Math.abs(w-f),v=f-w,d.data("has_right_grip")?(g=o.offset().left,p=Math.abs(g-f),x=f-g):(p=2*m,x=2*v),r.user_drag_start_callback.call(d,a),m===p?w>f?(y+=v,n=!0):(P+=x,n=!1):p>m?(y+=v,n=!0):(P+=x,n=!1),d.data("has_right_grip")?P>b&&(P=b):y>b&&(y=b),0>y&&(y=0),e=!0;var A=d.data("cur_min"),S=d.data("cur_max");c.set_position_from_px.call(d,y,P),c.refresh_grips_style.call(d),c.notify_changed_implicit.call(d,"drag_start",A,S),a.preventDefault()}}},drag_move_func_touch:function(t){if(e===!0){var i=t.originalEvent;i.preventDefault();var a=i.touches[0];c.drag_move_func(a)}},drag_move_func:function(t){if(e){var r=i,s=c.getSliderWidthPx.call(r)-r.data("left_grip_width"),o=c.getLeftGripPositionPx.call(r),l=c.getRightGripPositionPx.call(r),h=t.pageX,d=h-a,u=r.offset().left+r.data("left_grip_width"),_=u+s,g=0,f=0;u>h&&(g=1,f=0),h>_&&(f=1,g=0),r.data("has_right_grip")&&(n?s>=l&&o+d>l&&(n=!1,o=l):o>=0&&o>l+d&&(n=!0,l=o));var m=o,p=l;(d>0&&!g||0>d&&!f)&&(n?m+=d:p+=d),c.validateAndMoveGripsToPx.call(r,m,p),a=h,t.preventDefault()}},drag_end_func_touch:function(t){var i=t.originalEvent;i.preventDefault();var e=i.touches[0];c.drag_end_func(e)},drag_end_func:function(){var t=i;if("undefined"!=typeof t){e=!1,a=void 0,c.notify_mouse_up_implicit.call(t,n),i=void 0;var r=t.data("settings");t.find(r.left_grip_selector+","+r.value_bar_selector+","+r.right_grip_selector).addClass(r.animating_css_class)}},get_rounding_for_value:function(t){var i=this,e=i.data("rounding"),a=i.data("rounding_ranges");if("object"==typeof a){var n=c.binarySearch.call(i,a,t,function(t,i){return t[i].range},function(t,i,e){return t<i[e].range?e>0?t>=i[e-1].range?0:-1:0:1});if(e=1,n>-1)e=parseInt(a[n].value,10);else{var r=a.length-1;t>=a[r].range&&(e=a[r].value)}}return e},notify_mouse_up_implicit:function(t){var i=this,e=h.get_current_min_value.call(i),a=h.get_current_max_value.call(i),n=!1;(i.data("beforestart_min")!==e||i.data("beforestart_max")!==a)&&(n=!0,i.data("beforestart_min",e),i.data("beforestart_max",a));var r=i.data("settings");return r.user_mouseup_callback.call(i,h.get_current_min_value.call(i),h.get_current_max_value.call(i),t,n),i},notify_changed_implicit:function(t,i,e){var a=this,n=!1;("init"===t||"refresh"===t)&&(n=!0);var r=h.get_current_min_value.call(a),s=h.get_current_max_value.call(a);return n||(i=h.round_value_according_to_rounding.call(a,i),e=h.round_value_according_to_rounding.call(a,e)),(n||r!==i||s!==e)&&(c.notify_changed_explicit.call(a,t,i,e,r,s),n=1),n},notify_changed_explicit:function(t,i,e,a,n){var r=this,s=r.data("settings");return r.data("aria_enabled")&&c.updateAriaAttributes.call(r),s.value_changed_callback.call(r,t,a,n,i,e),r},validate_params:function(i){var e=this,a=e.data("range_min"),n=e.data("range_max"),r=e.data("cur_min"),s=e.data("lower-limit"),o=e.data("upper-limit"),l=c.haveLimits.call(e);"undefined"==typeof a&&t.error("the data-range_min attribute was not defined"),"undefined"==typeof n&&t.error("the data-range_max attribute was not defined"),"undefined"==typeof r&&t.error("the data-cur_min attribute must be defined"),a>n&&t.error("Invalid input parameter. must be min < max"),l&&s>o&&t.error("Invalid data-lower-limit or data-upper-limit"),0===e.find(i.left_grip_selector).length&&t.error("Cannot find element pointed by left_grip_selector: "+i.left_grip_selector),"undefined"!=typeof i.right_grip_selector&&0===e.find(i.right_grip_selector).length&&t.error("Cannot find element pointed by right_grip_selector: "+i.right_grip_selector),"undefined"!=typeof i.value_bar_selector&&0===e.find(i.value_bar_selector).length&&t.error("Cannot find element pointed by value_bar_selector"+i.value_bar_selector)},rangemap_0_to_n:function(t,i){var e=this,a=e.data("range_min"),n=e.data("range_max");return a>=t?0:t>=n?i:Math.floor((i*t-i*a)/(n-a))},inverse_rangemap_0_to_n:function(t,i){var e=this,a=e.data("range_min"),n=e.data("range_max");if(0>=t)return a;if(t>=i)return n;var r=(n-a)*t/i;return r+a}},h={teardown:function(){var i=this;return i.removeData(),t(document).unbind("mousemove.nstSlider").unbind("mouseup.nstSlider"),i.parent().unbind("mousedown.nstSlider").unbind("touchstart.nstSlider").unbind("touchmove.nstSlider").unbind("touchend.nstSlider"),i.unbind("keydown.nstSlider").unbind("keyup.nstSlider"),i},init:function(i){var e=t.extend({animating_css_class:"nst-animating",touch_tolerance_value_bar_y:30,touch_tolerance_value_bar_x:15,left_grip_selector:".nst-slider-grip-left",right_grip_selector:void 0,highlight:void 0,rounding:void 0,value_bar_selector:void 0,value_changed_callback:function(){},user_mouseup_callback:function(){},user_drag_start_callback:function(){}},i),a=t(document);return a.unbind("mouseup.nstSlider"),a.unbind("mousemove.nstSlider"),a.bind("mousemove.nstSlider",c.drag_move_func),a.bind("mouseup.nstSlider",c.drag_end_func),this.each(function(){var i=t(this),a=i.parent();i.data("enabled",!0);var d=i.data("range_min"),u=i.data("range_max"),_=i.data("cur_min"),g=i.data("cur_max");"undefined"==typeof g&&(g=_),""===d&&(d=0),""===u&&(u=0),""===_&&(_=0),""===g&&(g=0),i.data("range_min",d),i.data("range_max",u),i.data("cur_min",_),i.data("cur_max",g),c.validate_params.call(i,e),i.data("settings",e),"undefined"!=typeof e.rounding?h.set_rounding.call(i,e.rounding):"undefined"!=typeof i.data("rounding")?h.set_rounding.call(i,i.data("rounding")):h.set_rounding.call(i,1);var f=i.find(e.left_grip_selector)[0],m=t(f),p=t(i.find(e.right_grip_selector)[0]);"undefined"==typeof m.attr("tabindex")&&m.attr("tabindex",0);var v=!1;i.find(e.right_grip_selector).length>0&&(v=!0,"undefined"==typeof p.attr("tabindex")&&p.attr("tabindex",0)),i.data("has_right_grip",v),i.data("aria_enabled")===!0&&(m.attr("role","slider").attr("aria-disabled","false"),v&&p.attr("role","slider").attr("aria-disabled","false")),i.bind("keyup.nstSlider",function(t){if(i.data("enabled")){switch(t.which){case 37:case 38:case 39:case 40:if(r===o){var e,a,d,u=c.getSliderWidthPx.call(i);if(0>s-l){for(a=l;u>=a;a++)if(e=h.round_value_according_to_rounding.call(i,c.getSliderValuesAtPositionPx.call(i,a,a)[1]),e!==o){d=a;break}}else for(a=l;a>=0;a--)if(e=h.round_value_according_to_rounding.call(i,c.getSliderValuesAtPositionPx.call(i,a,a)[1]),e!==o){d=a;break}n?c.validateAndMoveGripsToPx.call(i,d,c.getRightGripPositionPx.call(i)):c.validateAndMoveGripsToPx.call(i,c.getLeftGripPositionPx.call(i),d),c.notify_mouse_up_implicit.call(i,n)}}r=void 0,s=void 0,o=void 0,l=void 0}}),i.bind("keydown.nstSlider",function(t){if(i.data("enabled")){var e=function(t,e){var a=c.getLeftGripPositionPx.call(i),d=c.getRightGripPositionPx.call(i);switch("undefined"==typeof r&&(s=n?a:d,r=n?h.get_current_min_value.call(i):h.get_current_max_value.call(i)),e.which){case 37:case 40:n?a--:d--,e.preventDefault();break;case 38:case 39:n?a++:d++,e.preventDefault()}l=n?a:d,c.validateAndMoveGripsToPx.call(i,a,d),o=n?h.get_current_min_value.call(i):h.get_current_max_value.call(i)};v&&i.find(":focus").is(p)?(n=!1,e.call(i,p,t)):(n=!0,e.call(i,m,t))}});var x=c.getLeftGripWidth.call(i),y=v?c.getRightGripWidth.call(i):x;i.data("left_grip_width",x),i.data("right_grip_width",y),i.data("value_bar_selector",e.value_bar_selector),d===u||_===g?h.set_range.call(i,d,u):c.set_position_from_val.call(i,i.data("cur_min"),i.data("cur_max")),c.notify_changed_implicit.call(i,"init"),i.data("beforestart_min",h.get_current_min_value.call(i)),i.data("beforestart_max",h.get_current_max_value.call(i)),i.bind("mousedown.nstSlider",function(t){c.drag_start_func.call(i,t,e,m,p,!1)}),a.bind("touchstart.nstSlider",function(t){c.drag_start_func_touch.call(i,t,e,m,p,!0)}),a.bind("touchend.nstSlider",function(t){c.drag_end_func_touch.call(i,t)}),a.bind("touchmove.nstSlider",function(t){c.drag_move_func_touch.call(i,t)});var b=i.data("histogram");"undefined"!=typeof b&&h.set_step_histogram.call(i,b)})},get_range_min:function(){var t=this;return t.data("range_min")},get_range_max:function(){var t=this;return t.data("range_max")},get_current_min_value:function(){var i,e=t(this),a=h.get_range_min.call(e),n=h.get_range_max.call(e),r=e.data("cur_min");if(i=a>=r?a:h.round_value_according_to_rounding.call(e,r),c.haveLimits.call(e)){if(a>=i)return e.data("lower-limit");if(i>=n)return e.data("upper-limit")}else{if(a>=i)return a;if(i>=n)return n}return i},get_current_max_value:function(){var i,e=t(this),a=h.get_range_min.call(e),n=h.get_range_max.call(e),r=e.data("cur_max");if(i=r>=n?n:h.round_value_according_to_rounding.call(e,r),c.haveLimits.call(e)){if(i>=n)return e.data("upper-limit");if(a>=i)return e.data("lower-limit")}else{if(i>=n)return n;if(a>=i)return a}return i},is_handle_to_left_extreme:function(){var t=this;return c.haveLimits.call(t)?t.data("lower-limit")===h.get_current_min_value.call(t):h.get_range_min.call(t)===h.get_current_min_value.call(t)},is_handle_to_right_extreme:function(){var t=this;return c.haveLimits.call(t)?t.data("upper-limit")===h.get_current_max_value.call(t):h.get_range_max.call(t)===h.get_current_max_value.call(t)},refresh:function(){var t=this,i=t.data("last_step_histogram");"undefined"!=typeof i&&h.set_step_histogram.call(t,i),c.set_position_from_val.call(t,h.get_current_min_value.call(t),h.get_current_max_value.call(t));var e=t.data("highlightedRangeMin");if("number"==typeof e){var a=t.data("highlightedRangeMax");h.highlight_range.call(t,e,a)}return c.notify_changed_implicit.call(t,"refresh"),t},disable:function(){var t=this,i=t.data("settings");return t.data("enabled",!1).find(i.left_grip_selector).attr("aria-disabled","true").end().find(i.right_grip_selector).attr("aria-disabled","true"),t},enable:function(){var t=this,i=t.data("settings");return t.data("enabled",!0).find(i.left_grip_selector).attr("aria-disabled","false").end().find(i.right_grip_selector).attr("aria-disabled","false"),t},is_enabled:function(){var t=this;return t.data("enabled")},set_position:function(t,i){var e=this,a=e.data("cur_min"),n=e.data("cur_max");t>i?c.set_position_from_val.call(e,i,t):c.set_position_from_val.call(e,t,i),c.refresh_grips_style.call(e),c.notify_changed_implicit.call(e,"set_position",a,n),e.data("beforestart_min",t),e.data("beforestart_max",i)},set_step_histogram:function(i){var e=this;e.data("last_step_histogram",i),"undefined"==typeof i&&(t.error("got an undefined histogram in set_step_histogram"),c.unset_step_histogram.call(e));var a=c.getSliderWidthPx.call(e)-e.data("left_grip_width"),n=i.length;if(!(0>=a)){var r,s=0;for(r=0;n>r;r++)s+=i[r];if(0===s)return h.unset_step_histogram.call(e),e;var o=parseFloat(s)/a;for(r=0;n>r;r++)i[r]=i[r]/o;var l=[i[0]];for(r=1;n>r;r++){var d=l[r-1]+i[r];l.push(d)}l.push(a);for(var u=[e.data("range_min")],_=0,g=u[0],f=0;a>=_;){var m=parseInt(l.shift(),10),p=c.inverse_rangemap_0_to_n.call(e,f+1,n+1);f++;var v=m-_,x=p-g;for(r=_;m>r;r++){var y=g+x*(r-_+1)/v;u.push(y),_++,g=y}if(_===a)break}u[u.length-1]=e.data("range_max");var b=function(t){return u[parseInt(t,10)]},w=function(i){var a=c.binarySearch.call(e,u,i,function(t,i){return t[i]},function(i,e,a){return i===e[a]?0:i<e[a]&&0===a?0:e[a-1]<=i&&i<e[a]?0:i>e[a]?1:i<=e[a-1]?-1:(t.error("cannot compare s: "+i+" with a["+a+"]. a is: "+e.join(",")),void 0)});return a};return e.data("pixel_to_value_mapping",b),e.data("value_to_pixel_mapping",w),e}},unset_step_histogram:function(){var t=this;return t.removeData("pixel_to_value_mapping"),t.removeData("value_to_pixel_mapping"),t.removeData("last_step_histogram"),t},set_range:function(t,i){var e=this,a=h.get_current_min_value.call(e),n=h.get_current_max_value.call(e);return e.data("range_min",t),e.data("range_max",i),c.set_position_from_val.call(e,a,n),c.notify_changed_implicit.call(e,"set_range",a,n),e},highlight_range:function(i,e){var a=this,n=a.data("settings");"undefined"==typeof n.highlight&&t.error('you cannot call highlight_range if you haven\' specified the "highlight" parameter in construction!'),i||(i=0),e||(e=0);var r=c.valueToPx.call(a,i),s=c.valueToPx.call(a,e),o=s-r+a.data("left_grip_width"),l=a.find(n.highlight.panel_selector);return l.css("left",r+"px"),l.css("width",o+"px"),a.data("highlightedRangeMin",i),a.data("highlightedRangeMax",e),c.refresh_grips_style.call(a),a},set_rounding:function(i){var e=this;"string"==typeof i&&i.indexOf("{")>-1&&(i=t.parseJSON(i)),e.data("rounding",i);var a=[];if("object"==typeof i){var n;for(n in i)if(i.hasOwnProperty(n)){var r=i[n];a.push({range:r,value:n})}a.sort(function(t,i){return t.range-i.range}),e.data("rounding_ranges",a)}else e.removeData("rounding_ranges");return e},get_rounding:function(){var t=this;return t.data("rounding")},round_value_according_to_rounding:function(i){var e=this,a=c.get_rounding_for_value.call(e,i);if(a>0){var n=i/a,r=parseInt(n,10),s=n-r;s>.5&&r++;var o=r*a;return o}return t.error("rounding must be > 0, got "+a+" instead"),i}},d="nstSlider";t.fn[d]=function(i){if(h[i]){if(this.data("initialized")===!0)return h[i].apply(this,Array.prototype.slice.call(arguments,1));throw new Error("method "+i+" called on an uninitialized instance of "+d)}return"object"!=typeof i&&i?(t.error("Cannot call method "+i),void 0):(this.data("initialized",!0),h.init.apply(this,arguments))}}(jQuery),function(t){t.fn.tile=function(i){var e,a,n,r,s,o,l=document.body.style,c=["height"],h=this.length-1;return i||(i=this.length),o=l.removeProperty?l.removeProperty:l.removeAttribute,this.each(function(){o.apply(this.style,c)}).each(function(o){r=o%i,0==r&&(e=[]),a=e[r]=t(this),s="border-box"==a.css("box-sizing")?a.outerHeight():a.innerHeight(),(0==r||s>n)&&(n=s),(o==h||r==i-1)&&t.each(e,function(){this.css("height",n)})})}}(jQuery);