App.controller("ColorSelectController",["$scope","$filter",function(e){e.active=0,e.types=ColorSelectConfig.regions[e.active],e.textures=ColorSelectConfig.textures,e.tops=ColorSelectConfig.tops,e.primary_cupboard=!1,e.texture_num=0,e.state="_nat",e.top_num=1,e.shape_num=1,ons.ready(function(){e.image=e.types[0],e.primary_texture=e.textures[3],e.primary_top=e.tops[0],e.imgPreload}),e.swichColor=function(t){$(".side").find(".side-list-item .svg-wrapper").removeClass("active");e.primary_cupboard?"on":"off";e.shape_num=2,$(".btn-shape").removeClass("active"),$(".color-select-view.prev").css("background-image","url("+e.types[t].source+")"),e.state=e.types[t].state,$(".color-select-view.fade").stop(!0,!0).fadeOut(400,"swing",function(){$(".side").find(".side-list-item").eq(t).find(".svg-wrapper").addClass("active"),$(this).css("background-image","url("+e.types[t].source+")").show()}),e.texture=e.types[t].texture?!0:!1,e.top=e.types[t].top?!0:!1,set_menu(t)},e.toggle=function(t){t!=e.active&&($(".toggle-switch span").toggleClass("active"),e.active=t,e.types=ColorSelectConfig.regions[e.active],$(".color-select-view.prev").css("background-image","url("+e.types[0].source+")"),$(".side").find(".side-list-item .svg-wrapper").removeClass("active"),$(".color-select-view.fade").stop(!0,!0).fadeOut(400,"swing",function(){$(".side").find(".side-list-item .svg-wrapper:first").addClass("active"),$(this).css("background-image","url("+e.types[0].source+")").fadeIn(400,"swing")}),set_menu(0))},e.switch_texture=function(t){var s=$(".color-select-view.overlay"),o=$(".color-select-view.overlay-prev"),r=e.primary_cupboard?"on":"off";o.css("background-image","url("+get_tex_url("img/png/kit","m0"+(t+1),r,".png")+")"),e.primary_texture=e.textures[t],e.texture_num=t,s.stop(!0,!0).fadeOut(300,"swing",function(){$(this).css("background-image","url("+get_tex_url("img/png/kit","m0"+(t+1),r,".png")+")").fadeIn(400,"swing")})},e.switch_top=function(t){e.primary_top=e.tops[t],e.top_num=t+1,$(".color-select-view.prev").css("background-image","url("+get_url("img/kit"+e.state,"_t0"+(t+1),"_s0"+e.shape_num,".jpg")+")"),$(".color-select-view.fade").stop(!0,!0).fadeOut(400,"swing",function(){$(this).css("background-image","url("+get_url("img/kit"+e.state,"_t0"+(t+1),"_s0"+e.shape_num,".jpg")+")").show()})},e.switch_shape=function(){$(".btn-shape").toggleClass("active"),e.shape_num=$(".btn-shape").hasClass("active")?2:1,$(".color-select-view.prev").css("background-image","url("+get_url("img/kit"+e.state,"_t0"+e.top_num,"_s0"+e.shape_num,".jpg")+")"),$(".color-select-view.fade").stop(!0,!0).fadeOut(400,"swing",function(){$(this).css("background-image","url("+get_url("img/kit"+e.state,"_t0"+e.top_num,"_s0"+e.shape_num,".jpg")+")").show()})},e.rowClass=function(e){return 0==e?"active":""},e.sideClose=function(){$(".side,.btn-close").toggleClass("close")},e.switch_cupboard=function(){$(".btn-cupboard").toggleClass("active"),$(".btn-cupboard").hasClass("active")?(e.primary_cupboard=!0,e.shape_num=2,$(".btn-shape").addClass("active"),e.switch_shape()):e.primary_cupboard=!1,e.switch_texture(e.texture_num)},get_tex_url=function(e,t,s,o){return e+"_"+s+"_"+t+o},get_url=function(e,t,s,o){return e+t+s+o},set_menu=function(t){e.texture=e.types[t].texture?!0:!1,e.top=e.types[t].top?!0:!1,e.cupboard=e.types[t].cupboard?!0:!1,e.shape=e.types[t].shape?!0:!1},e.imgPreload=function(){for(var e in ColorSelectConfig.textures){var t=document.createElement("img");t.src=ColorSelectConfig.textures[e].source}for(var e in ColorSelectConfig.tops){var t=document.createElement("img");t.src=ColorSelectConfig.tops[e].source}for(var s in regions)for(var e in ColorSelectConfig.regions[s]){var t=document.createElement("img");t.src=ColorSelectConfig.regions[s][e].source}}}]);